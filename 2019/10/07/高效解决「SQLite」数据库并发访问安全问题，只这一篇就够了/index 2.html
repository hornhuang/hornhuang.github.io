<!DOCTYPE html>
<html lang="zh-CN">





<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/apple-touch-icon.png">
  <link rel="icon" type="image/png" href="/img/favicon.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="description" content="personal website of _yuanhao">
  <meta name="author" content="_yuanhao">
  <meta name="keywords" content="_yuanhao Hexo blogs github android google developer">
  <title>é«˜æ•ˆè§£å†³ã€ŒSQLiteã€æ•°æ®åº“å¹¶å‘è®¿é—®å®‰å…¨é—®é¢˜ï¼Œåªè¿™ä¸€ç¯‡å°±å¤Ÿäº† ~ _yuanhao</title>
  <link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
  <link rel="stylesheet" href="/lib/bootstrap/css/bootstrap.min.css">
  <link rel="stylesheet" href="/lib/mdbootstrap/css/mdb.min.css">
  <link rel="stylesheet" href="/lib/github-markdown/github-markdown.min.css">
  <link rel="stylesheet" href="https://at.alicdn.com/t/font_1067060_qzomjdt8bmp.css">
  
    <link rel="stylesheet" href="/lib/prettify/tomorrow-night-eighties.min.css">
  
  <link rel="stylesheet" href="/css/main.css">

  
</head>


<body>
  <header style="height: 70vh;">
    <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand"
       href="/">&nbsp;<strong>_yuanhao</strong>&nbsp;</a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          <li class="nav-item">
            <a class="nav-link" href="/">Home</a>
          </li>
        
          
          
          <li class="nav-item">
            <a class="nav-link" href="/archives/">Archives</a>
          </li>
        
          
          
          <li class="nav-item">
            <a class="nav-link" href="/categories/">Categories</a>
          </li>
        
          
          
          <li class="nav-item">
            <a class="nav-link" href="/tags/">Tags</a>
          </li>
        
          
          
          <li class="nav-item">
            <a class="nav-link" href="/about/">About</a>
          </li>
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" data-toggle="modal" data-target="#modalSearch">&nbsp;&nbsp;<i
                class="iconfont icon-search"></i>&nbsp;&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>


</nav>

    <div class="view intro-2"
         style="background: url('/img/default.png')no-repeat center center;
           background-size: cover;
           background-attachment: fixed;">
      <div class="full-bg-img">
        <div class="mask rgba-black-light flex-center">
          <div class="container text-center white-text fadeInUp">
            <span class="h2" id="subtitle">
              
            </span>

            
              <br>
              <p>æ˜ŸæœŸä¸€, åæœˆ 7æ—¥ 2019, 10:36 ä¸Šåˆ</p>
            
          </div>

          
        </div>
      </div>
    </div>
  </header>

  <main>
    
      

<div class="container-fluid">
  <div class="row">
    <div class="d-none d-lg-block col-lg-2"></div>
    <div class="col-lg-8 nopadding-md">
      <div class="py-5 z-depth-3" id="board">
        <div class="post-content mx-auto">
          <div class="markdown-body">
            <p><img src="https://user-gold-cdn.xitu.io/2019/9/29/16d7d4bb55a49eb6?w=2000&h=1215&f=jpeg&s=125618" srcset="/img/loading.gif" alt="å­¦Android"></p>
<h1 id="Concurrent-database-access"><a href="#Concurrent-database-access" class="headerlink" title="Concurrent database access"></a>Concurrent database access</h1><hr>
<p>å¯¹äº Android Dev è€Œè¨€ï¼Œæœ‰å…³ SQLite çš„æ“ä½œå†ç»å¸¸ä¸è¿‡äº†ï¼Œç›¸æ¯”ä½ ä¸€å®šç»å†è¿‡æ§åˆ¶å°ä¸€ç‰‡çˆ†çº¢çš„æƒ…å†µï¼Œè¿™ä¸ç¦è®©æˆ‘ä»¬ç–‘é—®ï¼šSQLite åˆ°åº•æ˜¯çº¿ç¨‹å®‰å…¨çš„å—ï¼Ÿ</p>
<p><strong>OK  åºŸè¯ä¸å¤šè¯´ï¼Œæˆ‘ä»¬ â¬‡ï¸</strong></p>
<h1 id="ç›´æ¥å¼€å§‹"><a href="#ç›´æ¥å¼€å§‹" class="headerlink" title="ç›´æ¥å¼€å§‹"></a>ç›´æ¥å¼€å§‹</h1><hr>
<h4 id="é¦–å…ˆï¼Œå‡è®¾ä½ å·²ç»å®ç°äº†ä¸€ä¸ª-SQLiteHelper-ç±»ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š"><a href="#é¦–å…ˆï¼Œå‡è®¾ä½ å·²ç»å®ç°äº†ä¸€ä¸ª-SQLiteHelper-ç±»ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š" class="headerlink" title="é¦–å…ˆï¼Œå‡è®¾ä½ å·²ç»å®ç°äº†ä¸€ä¸ª SQLiteHelper ç±»ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š"></a>é¦–å…ˆï¼Œå‡è®¾ä½ å·²ç»å®ç°äº†ä¸€ä¸ª SQLiteHelper ç±»ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</h4><pre><code class="java">public class DatabaseHelper extends SQLiteOpenHelper { ... }</code></pre>
<p>ç°åœ¨ä½ æƒ³è¦åœ¨ä¸¤ä¸ªå­çº¿ç¨‹ä¸­ï¼Œåˆ†åˆ«åœ°å‘ SQLite é‡Œå†™å…¥ä¸€äº›æ•°æ®ï¼š</p>
<pre><code class="java"> // Thread 1
 Context context = getApplicationContext();
 DatabaseHelper helper = new DatabaseHelper(context);
 SQLiteDatabase database = helper.getWritableDatabase();
 database.insert(â€¦);
 database.close();

 // Thread 2
 Context context = getApplicationContext();
 DatabaseHelper helper = new DatabaseHelper(context);
 SQLiteDatabase database = helper.getWritableDatabase();
 database.insert(â€¦);
 database.close();</code></pre>
<blockquote>
<p>å¯¹å§ï¼Ÿçœ‹ä¸Šå»å¾ˆ OK æ²¡å•¥æ¯›ç—…ã€‚</p>
</blockquote>
<p>é‚£ä¹ˆè¿™æ—¶ï¼Œæˆ‘ä»¬ç‚¹ä¸€ä¸‹ <code>run</code> ï¼Œgioï½ ä½ å°†ä¼šåœ¨ä½ çš„ logcat é‡Œæ”¶åˆ°å¦‚ä¸‹ç¤¼ç‰©ã€ŒæŠ¥é”™ã€ï¼š</p>
<pre><code class="java">android.database.sqlite.SQLiteDatabaseLockedException: database is locked (code 5)</code></pre>
<h4 id="åˆ°åº•æ˜¯æ€ä¹ˆå›äº‹å‘¢ï¼Ÿ"><a href="#åˆ°åº•æ˜¯æ€ä¹ˆå›äº‹å‘¢ï¼Ÿ" class="headerlink" title="åˆ°åº•æ˜¯æ€ä¹ˆå›äº‹å‘¢ï¼Ÿ"></a>åˆ°åº•æ˜¯æ€ä¹ˆå›äº‹å‘¢ï¼Ÿ</h4><p>æˆ‘ä»¬åˆ†æä¸€ä¸‹æŠ¥é”™ç»ˆäºå‘ç°ï¼šè¿™æ˜¯ç”±äºä½ æ¯æ¬¡åˆ›å»º SQLiteHelper æ—¶ï¼Œéƒ½å¯¹æ•°æ®åº“è¿›è¡Œäº†ä¸€ä¸ªé“¾æ¥æ“ä½œã€‚è¿™æ—¶ï¼Œå¦‚æœä½ å°è¯•ç€ï¼ŒåŒæ—¶ä»å®é™…ä¸åŒçš„é“¾æ¥ä¸­ï¼Œå¯¹æ•°æ®åº“è¿›è¡Œå†™å…¥æ“ä½œï¼Œå¤±è´¥å°±æ˜¯å¿…ç„¶çš„äº†ã€‚</p>
<blockquote>
<p><strong>æ€»ç»“ä¸€ä¸‹</strong><br>å¦‚æœæˆ‘ä»¬æƒ³å†ä¸åŒçš„çº¿ç¨‹ä¸­ï¼Œå¯¹æ•°æ®åº“è¿›è¡ŒåŒ…æ‹¬è¯»å†™æ“ä½œåœ¨å†…çš„ä»»ä½•ä½¿ç”¨ï¼Œæˆ‘ä»¬å°±å¿…é¡»å¾—ç¡®ä¿ï¼Œæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯åŒä¸€ä¸ªçš„è¿æ¥</p>
</blockquote>
<p>å¥½ï¼Œé‚£ç°åœ¨é—®é¢˜å°±æ˜äº†äº†ã€‚ç°åœ¨è®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªå•ä¾‹æ¨¡å¼ç±»ï¼š<code>DatabaseManager</code> ç”¨æ¥åˆ›å»ºå’Œè¿”å›å”¯ä¸€çš„ï¼Œå•ä¾‹ <code>DatabaseManager</code> å¯¹è±¡ã€‚</p>
<blockquote>
<p>ps æœ‰äº›åŒå­¦é—®æˆ‘ä»€ä¹ˆæ˜¯å•ä¾‹æ¨¡å¼ï¼Œæˆ‘ä¸“é—¨è·‘å»å†™äº†è¿™ç¯‡åšå®¢æ¥è§£é‡Šä¸‹ï¼Œ<a href="https://blog.csdn.net/qq_43377749/article/details/96324909" target="_blank" rel="noopener">å•ä¾‹æ¨¡å¼-å…¨å±€å¯ç”¨çš„ context å¯¹è±¡ï¼Œè¿™ä¸€ç¯‡å°±å¤Ÿäº†</a>ç å­—ä¸æ˜“å¸®æˆ‘ç‚¹ä¸ªèµè°¢è°¢ ğŸ™</p>
</blockquote>
<pre><code class="java">public class DatabaseManager {

    private static DatabaseManager instance;
    private static SQLiteOpenHelper mDatabaseHelper;

    public static synchronized void initializeInstance(SQLiteOpenHelper helper) {
        if (instance == null) {
            instance = new DatabaseManager();
            mDatabaseHelper = helper;
        }
    }

    public static synchronized DatabaseManager getInstance() {
        if (instance == null) {
            throw new IllegalStateException(DatabaseManager.class.getSimpleName() +
                    &quot; is not initialized, call initialize(..) method first.&quot;);
        }

        return instance;
    }

    public synchronized SQLiteDatabase getDatabase() {
        return mDatabaseHelper.getWritableDatabase();
    }

}</code></pre>
<p>ç°åœ¨ï¼Œæˆ‘ä»¬åœ¨å›æ¥ä¿®æ”¹ä¸‹ä¹‹å‰çš„ä»£ç ï¼Œç»“æœå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<pre><code class="java">// In your application class
DatabaseManager.initializeInstance(new DatabaseHelper());

// Thread 1
DatabaseManager manager = DatabaseManager.getInstance();
SQLiteDatabase database = manager.getDatabase()
database.insert(â€¦);
database.close();

// Thread 2
DatabaseManager manager = DatabaseManager.getInstance();
SQLiteDatabase database = manager.getDatabase()
database.insert(â€¦);
database.close();</code></pre>
<p>é€»è¾‘æ¯”ä¹‹å‰æ›´æ¸…æ™°ï¼Œä»£ç å†—ä½™ä¹Ÿå°‘äº†ã€‚ç°åœ¨æˆ‘ä»¬åœ¨è·‘ä¸‹ä»£ç ï¼Œè¿™æ—¶æˆ‘ä»¬ä¼šæ”¶åˆ°ï¼Œå¦ä¸€ä¸ª <code>cache</code> ï¼š</p>
<pre><code class="java">java.lang.IllegalStateException: attempt to re-open an already-closed object: SQLiteDatabase</code></pre>
<p>ä¸è¦æ…Œï¼Œæˆ‘ä»¬ä»”ç»†åˆ†æä¸‹æŠ¥é”™ï¼Œæˆ‘ä»¬å‘ç°ï¼šå•ä¾‹æ¨¡å¼çš„ä½¿ç”¨ä¿è¯äº†æˆ‘ä»¬ï¼Œåœ¨çº¿ç¨‹ä¸€ã€äºŒã€ŒThread 1ã€Thread 2 ä¸­ã€åªä¼šè·å¾—åˆ°å”¯ä¸€çš„ SQLiteHelper å¯¹è±¡ï¼Œä½†è¿™æ—¶é—®é¢˜å°±æ¥äº†ï¼Œå½“æˆ‘ä»¬è¿è¡Œå®Œçº¿ç¨‹ä¸€ã€ŒThread 1ã€æ—¶ï¼Œæˆ‘ä»¬çš„ <code>database.close();</code> å·²ç»æ›¿æˆ‘ä»¬å…³é—­äº†å¯¹æ•°æ®åº“çš„è¿æ¥ï¼Œä½†ä¸æ­¤åŒæ—¶æˆ‘ä»¬çš„çº¿ç¨‹äºŒã€ŒThread 2ã€ä¾ç„¶ä¿æŒè¿™å¯¹ SQLiteHelper çš„å¼•ç”¨ã€‚æ­£æ˜¯è¿™ä¸ªåŸå› ï¼Œæˆ‘ä»¬æ”¶åˆ°äº†<code>IllegalStateException</code>çš„æŠ¥é”™ã€‚</p>
<p>æ‰€ä»¥ï¼Œè¿™æ—¶æˆ‘ä»¬å°±éœ€è¦ä¿è¯ï¼Œå½“æ²¡æœ‰äººä½¿ç”¨ SQLiteHelper æ—¶ï¼Œå†å°†å…¶æ–­å¼€è¿æ¥ã€‚</p>
<h4 id="ä¿è¯-SQLIiteHelper-åœ¨æ— äººä½¿ç”¨æ—¶æ‰æ–­å¼€è¿æ¥"><a href="#ä¿è¯-SQLIiteHelper-åœ¨æ— äººä½¿ç”¨æ—¶æ‰æ–­å¼€è¿æ¥" class="headerlink" title="ä¿è¯ SQLIiteHelper åœ¨æ— äººä½¿ç”¨æ—¶æ‰æ–­å¼€è¿æ¥"></a>ä¿è¯ SQLIiteHelper åœ¨æ— äººä½¿ç”¨æ—¶æ‰æ–­å¼€è¿æ¥</h4><p>å…³äºè¿™ä¸ªé—®é¢˜çš„è§£å†³ stackoveflow ä¸Šå¾ˆå¤šäººå»ºè®®æˆ‘ä»¬ï¼šæ°¸è¿œä¸è¦æ–­å¼€ SQLiteHelper çš„è¿æ¥ï¼Œä½†æ˜¯è¿™æ ·ä»¥æ¥ä½ ä¼šåœ¨ logcat ä¸Šå¾—åˆ°å¦‚ä¸‹è¾“å‡ºï¼š</p>
<pre><code class="java">Leak found
Caused by: java.lang.IllegalStateException: SQLiteDatabase created and never closed</code></pre>
<p>æ‰€ä»¥ï¼Œæˆ‘éå¸¸ä¸å»ºè®®ä½ ç”¨è¿™ä¸ªæ–¹æ³•ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¼•å…¥è®¡æ•°å™¨çš„æ¦‚å¿µ</p>
<h4 id="æ ‡å‡†æ ·ä¾‹"><a href="#æ ‡å‡†æ ·ä¾‹" class="headerlink" title="æ ‡å‡†æ ·ä¾‹"></a>æ ‡å‡†æ ·ä¾‹</h4><p>é€šè¿‡å¦‚ä¸‹æ–¹æ³•ï¼Œä½ å°†é€šè¿‡ä¸€ä¸ªè®¡æ•°å™¨æ¥å®Œç¾è§£å†³ æ‰“å¼€/å…³é—­ æ•°æ®åº“è¿æ¥çš„é—®é¢˜ï¼š</p>
<pre><code class="java">public class DatabaseManager {

    private AtomicInteger mOpenCounter = new AtomicInteger();

    private static DatabaseManager instance;
    private static SQLiteOpenHelper mDatabaseHelper;
    private SQLiteDatabase mDatabase;

    public static synchronized void initializeInstance(SQLiteOpenHelper helper) {
        if (instance == null) {
            instance = new DatabaseManager();
            mDatabaseHelper = helper;
        }
    }

    public static synchronized DatabaseManager getInstance() {
        if (instance == null) {
            throw new IllegalStateException(DatabaseManager.class.getSimpleName() +
                    &quot; is not initialized, call initializeInstance(..) method first.&quot;);
        }

        return instance;
    }

    public synchronized SQLiteDatabase openDatabase() {
        if(mOpenCounter.incrementAndGet() == 1) {
            // Opening new database
            mDatabase = mDatabaseHelper.getWritableDatabase();
        }
        return mDatabase;
    }

    public synchronized void closeDatabase() {
        if(mOpenCounter.decrementAndGet() == 0) {
            // Closing database
            mDatabase.close();

        }
    }
}</code></pre>
<p>æˆ‘ä»¬åœ¨çº¿ç¨‹ä¸­å¯ä»¥è¿™æ ·ä½¿ç”¨å®ƒï¼š</p>
<pre><code class="java">SQLiteDatabase database = DatabaseManager.getInstance().openDatabase();
database.insert(...);
// database.close(); Don&#39;t close it directly!
DatabaseManager.getInstance().closeDatabase(); // correct way</code></pre>
<p>æ¯å½“ä½ éœ€è¦ä½¿ç”¨æ•°æ®åº“æ—¶ï¼Œä½ åªè¦è°ƒç”¨ DatabaseManager ä¸­çš„ openDatabase() æ–¹æ³•ã€‚åœ¨è¿™ä¸ªæ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªï¼Œç”¨æ¥è®°å½•æ•°æ®åº“è¢«â€œæ‰“å¼€â€äº†å‡ æ¬¡çš„ mOpenCounter å¯¹è±¡ã€‚å½“å®ƒç­‰äº 1 æ—¶ï¼Œè¿™æ„å‘³ç€ä½ éœ€è¦å»åˆ›å»ºæ–°çš„æ•°æ®åº“è¿æ¥æ¥ä½¿ç”¨æ•°æ®åº“ï¼Œå¦åˆ™çš„è¯ï¼Œå°±è¯´æ˜æ•°æ®åº“å·²ç»åœ¨ä½¿ç”¨ä¸­äº†ã€‚</p>
<p>åŒæ ·çš„æƒ…å†µä¹Ÿå‘ç”Ÿåœ¨ closeDatabase() æ–¹æ³•ä¸­ï¼Œå½“ä½ æ¯æ¬¡è°ƒç”¨è¯¥æ–¹æ³•æ—¶ï¼Œæˆ‘ä»¬çš„ mOpenCounter å¯¹è±¡å°±ä¼šå‡ä¸€ã€‚å½“å®ƒå‡åˆ° 0 æ—¶ï¼Œæˆ‘ä»¬å°±å»å…³é—­è¿™ä¸ªæ•°æ®åº“çš„è¿æ¥ã€‚</p>
<p>å®Œç¾ï¼Œæœ€åï¼š</p>
<ol>
<li>ç°åœ¨ä½ å°±èƒ½éšå¿ƒæ‰€æ¬²çš„ä½¿ç”¨ä½ çš„æ•°æ®åº“ï¼Œè€Œä¸”ä½ å¯ä»¥ç›¸ä¿¡ â€“ å®ƒæ˜¯çº¿ç¨‹å®‰å…¨çš„äº†ï¼</li>
<li>å½“ç„¶å¾ˆå¤šåŒå­¦å¯¹æ•°æ®åº“çš„ä½¿ç”¨ï¼Œè¿˜æœ‰ç€å¾ˆå¤šçš„ç–‘æƒ‘ï¼Œæˆ‘åæœŸå°†ä¼šé’ˆå¯¹æ•°æ®åº“çš„ä½¿ç”¨ï¼Œä½œå‡ºä¸€ç³»åˆ—æ€»ç»“ï¼Œæœ‰å…´è¶£å¯ä»¥ç»§ç»­å…³æ³¨ <strong><a href="https://juejin.im/user/5d00b2ee6fb9a07ef5622eed/posts" target="_blank" rel="noopener">_yuanhao çš„ç¼–ç¨‹ä¸–ç•Œ</a></strong></li>
</ol>
<h1 id="ç›¸å…³æ–‡ç« "><a href="#ç›¸å…³æ–‡ç« " class="headerlink" title="ç›¸å…³æ–‡ç« "></a>ç›¸å…³æ–‡ç« </h1><hr>
<blockquote>
<h4 id="æ¯ä¸ªäººéƒ½è¦å­¦çš„å›¾ç‰‡å‹ç¼©ï¼Œæœ‰æ•ˆè§£å†³-Android-ç¨‹åº-OOM"><a href="#æ¯ä¸ªäººéƒ½è¦å­¦çš„å›¾ç‰‡å‹ç¼©ï¼Œæœ‰æ•ˆè§£å†³-Android-ç¨‹åº-OOM" class="headerlink" title="æ¯ä¸ªäººéƒ½è¦å­¦çš„å›¾ç‰‡å‹ç¼©ï¼Œæœ‰æ•ˆè§£å†³ Android ç¨‹åº OOM"></a><a href="https://juejin.im/post/5d932934e51d45784f2503a7" target="_blank" rel="noopener">æ¯ä¸ªäººéƒ½è¦å­¦çš„å›¾ç‰‡å‹ç¼©ï¼Œæœ‰æ•ˆè§£å†³ Android ç¨‹åº OOM</a></h4><h4 id="Android-è®©ä½ çš„-Room-æ­ä¸Š-RxJava-çš„é¡ºé£è½¦-ä»é‡å¤çš„ä»£ç ä¸­è§£è„±å‡ºæ¥"><a href="#Android-è®©ä½ çš„-Room-æ­ä¸Š-RxJava-çš„é¡ºé£è½¦-ä»é‡å¤çš„ä»£ç ä¸­è§£è„±å‡ºæ¥" class="headerlink" title="Android è®©ä½ çš„ Room æ­ä¸Š RxJava çš„é¡ºé£è½¦ ä»é‡å¤çš„ä»£ç ä¸­è§£è„±å‡ºæ¥"></a><a href="https://juejin.im/post/5d8ab439e51d45784021e446" target="_blank" rel="noopener">Android è®©ä½ çš„ Room æ­ä¸Š RxJava çš„é¡ºé£è½¦ ä»é‡å¤çš„ä»£ç ä¸­è§£è„±å‡ºæ¥</a></h4><h4 id="ViewModel-å’Œ-ViewModelProvider-Factoryï¼šViewModel-çš„åˆ›å»ºè€…"><a href="#ViewModel-å’Œ-ViewModelProvider-Factoryï¼šViewModel-çš„åˆ›å»ºè€…" class="headerlink" title="ViewModel å’Œ ViewModelProvider.Factoryï¼šViewModel çš„åˆ›å»ºè€…"></a><a href="https://juejin.im/post/5d80920bf265da03b638e0bd" target="_blank" rel="noopener">ViewModel å’Œ ViewModelProvider.Factoryï¼šViewModel çš„åˆ›å»ºè€…</a></h4><h4 id="å•ä¾‹æ¨¡å¼-å…¨å±€å¯ç”¨çš„-context-å¯¹è±¡ï¼Œè¿™ä¸€ç¯‡å°±å¤Ÿäº†"><a href="#å•ä¾‹æ¨¡å¼-å…¨å±€å¯ç”¨çš„-context-å¯¹è±¡ï¼Œè¿™ä¸€ç¯‡å°±å¤Ÿäº†" class="headerlink" title="å•ä¾‹æ¨¡å¼-å…¨å±€å¯ç”¨çš„ context å¯¹è±¡ï¼Œè¿™ä¸€ç¯‡å°±å¤Ÿäº†"></a><a href="https://juejin.im/post/5d2ef3c96fb9a07ef90ccf90" target="_blank" rel="noopener">å•ä¾‹æ¨¡å¼-å…¨å±€å¯ç”¨çš„ context å¯¹è±¡ï¼Œè¿™ä¸€ç¯‡å°±å¤Ÿäº†</a></h4><h4 id="ç¼©æ”¾æ‰‹åŠ¿-ScaleGestureDetector-æºç è§£æï¼Œè¿™ä¸€ç¯‡å°±å¤Ÿäº†"><a href="#ç¼©æ”¾æ‰‹åŠ¿-ScaleGestureDetector-æºç è§£æï¼Œè¿™ä¸€ç¯‡å°±å¤Ÿäº†" class="headerlink" title="ç¼©æ”¾æ‰‹åŠ¿ ScaleGestureDetector æºç è§£æï¼Œè¿™ä¸€ç¯‡å°±å¤Ÿäº†"></a><a href="https://juejin.im/post/5d14cc0ff265da1b6d403750" target="_blank" rel="noopener">ç¼©æ”¾æ‰‹åŠ¿ ScaleGestureDetector æºç è§£æï¼Œè¿™ä¸€ç¯‡å°±å¤Ÿäº†</a></h4><h4 id="Android-å±æ€§åŠ¨ç”»æ¡†æ¶-ObjectAnimatorã€ValueAnimator-ï¼Œè¿™ä¸€ç¯‡å°±å¤Ÿäº†"><a href="#Android-å±æ€§åŠ¨ç”»æ¡†æ¶-ObjectAnimatorã€ValueAnimator-ï¼Œè¿™ä¸€ç¯‡å°±å¤Ÿäº†" class="headerlink" title="Android å±æ€§åŠ¨ç”»æ¡†æ¶ ObjectAnimatorã€ValueAnimator ï¼Œè¿™ä¸€ç¯‡å°±å¤Ÿäº†"></a><a href="https://juejin.im/post/5d09990bf265da1bd260ef52" target="_blank" rel="noopener">Android å±æ€§åŠ¨ç”»æ¡†æ¶ ObjectAnimatorã€ValueAnimator ï¼Œè¿™ä¸€ç¯‡å°±å¤Ÿäº†</a></h4><h4 id="çœ‹å®Œè¿™ç¯‡å†ä¸ä¼š-View-çš„åŠ¨ç”»æ¡†æ¶ï¼Œæˆ‘è·ªæ“è¡£æ¿"><a href="#çœ‹å®Œè¿™ç¯‡å†ä¸ä¼š-View-çš„åŠ¨ç”»æ¡†æ¶ï¼Œæˆ‘è·ªæ“è¡£æ¿" class="headerlink" title="çœ‹å®Œè¿™ç¯‡å†ä¸ä¼š View çš„åŠ¨ç”»æ¡†æ¶ï¼Œæˆ‘è·ªæ“è¡£æ¿"></a><a href="https://juejin.im/post/5d04610be51d45775a700309" target="_blank" rel="noopener">çœ‹å®Œè¿™ç¯‡å†ä¸ä¼š View çš„åŠ¨ç”»æ¡†æ¶ï¼Œæˆ‘è·ªæ“è¡£æ¿</a></h4><h4 id="Android-è‡ªå®šä¹‰æ—¶é’Ÿæ§ä»¶-æ—¶é’ˆã€åˆ†é’ˆã€ç§’é’ˆçš„ç»˜åˆ¶è¿™ä¸€ç¯‡å°±å¤Ÿäº†"><a href="#Android-è‡ªå®šä¹‰æ—¶é’Ÿæ§ä»¶-æ—¶é’ˆã€åˆ†é’ˆã€ç§’é’ˆçš„ç»˜åˆ¶è¿™ä¸€ç¯‡å°±å¤Ÿäº†" class="headerlink" title="Android è‡ªå®šä¹‰æ—¶é’Ÿæ§ä»¶ æ—¶é’ˆã€åˆ†é’ˆã€ç§’é’ˆçš„ç»˜åˆ¶è¿™ä¸€ç¯‡å°±å¤Ÿäº†"></a><a href="https://juejin.im/post/5d00f09c6fb9a07ef06f8d03" target="_blank" rel="noopener">Android è‡ªå®šä¹‰æ—¶é’Ÿæ§ä»¶ æ—¶é’ˆã€åˆ†é’ˆã€ç§’é’ˆçš„ç»˜åˆ¶è¿™ä¸€ç¯‡å°±å¤Ÿäº†</a></h4><h4 id="android-è‡ªå®šä¹‰æ§ä»¶ä¹‹-ç»˜åˆ¶é’Ÿè¡¨ç›˜"><a href="#android-è‡ªå®šä¹‰æ§ä»¶ä¹‹-ç»˜åˆ¶é’Ÿè¡¨ç›˜" class="headerlink" title="android è‡ªå®šä¹‰æ§ä»¶ä¹‹-ç»˜åˆ¶é’Ÿè¡¨ç›˜"></a><a href="https://juejin.im/post/5d0c8faa5188253274727dc0" target="_blank" rel="noopener">android è‡ªå®šä¹‰æ§ä»¶ä¹‹-ç»˜åˆ¶é’Ÿè¡¨ç›˜</a></h4><h4 id="Android-è¿›é˜¶è‡ªå®šä¹‰-ViewGroup-è‡ªå®šä¹‰å¸ƒå±€"><a href="#Android-è¿›é˜¶è‡ªå®šä¹‰-ViewGroup-è‡ªå®šä¹‰å¸ƒå±€" class="headerlink" title="Android è¿›é˜¶è‡ªå®šä¹‰ ViewGroup è‡ªå®šä¹‰å¸ƒå±€"></a><a href="https://juejin.im/post/5d0db01af265da1bcc194aba" target="_blank" rel="noopener">Android è¿›é˜¶è‡ªå®šä¹‰ ViewGroup è‡ªå®šä¹‰å¸ƒå±€</a></h4></blockquote>
<h1 id="æ¬¢è¿å…³æ³¨-yuanhaoçš„æ˜é‡‘ï¼"><a href="#æ¬¢è¿å…³æ³¨-yuanhaoçš„æ˜é‡‘ï¼" class="headerlink" title="æ¬¢è¿å…³æ³¨_yuanhaoçš„æ˜é‡‘ï¼"></a>æ¬¢è¿å…³æ³¨<a href="https://juejin.im/user/5d00b2ee6fb9a07ef5622eed/posts" target="_blank" rel="noopener">_yuanhao</a>çš„æ˜é‡‘ï¼</h1><hr>
<p>å®šæœŸåˆ†äº«<code>Androidå¼€å‘</code>æ¹¿è´§ï¼Œè¿½æ±‚æ–‡ç« <code>å¹½é»˜ä¸æ·±åº¦</code>çš„å®Œç¾ç»Ÿä¸€ã€‚</p>
<p>å…³äºæºç  Demo é“¾æ¥ï¼š<strong><a href="https://github.com/FishInWater-1999/SQLiteSample" target="_blank" rel="noopener">ä¸ºäº†å†™ Demo èŠ±äº†å¥½å‡ å¤©æ—¶é—´ï¼Œå¸Œæœ›å¤§å®¶ç‚¹æ­Œ star~ è°¢è°¢ï¼</a></strong></p>
<h3 id="è¯·ç‚¹èµï¼å› ä¸ºä½ çš„é¼“åŠ±æ˜¯æˆ‘å†™ä½œçš„æœ€å¤§åŠ¨åŠ›ï¼"><a href="#è¯·ç‚¹èµï¼å› ä¸ºä½ çš„é¼“åŠ±æ˜¯æˆ‘å†™ä½œçš„æœ€å¤§åŠ¨åŠ›ï¼" class="headerlink" title="è¯·ç‚¹èµï¼å› ä¸ºä½ çš„é¼“åŠ±æ˜¯æˆ‘å†™ä½œçš„æœ€å¤§åŠ¨åŠ›ï¼"></a>è¯·ç‚¹èµï¼å› ä¸ºä½ çš„é¼“åŠ±æ˜¯æˆ‘å†™ä½œçš„æœ€å¤§åŠ¨åŠ›ï¼</h3><p><img src="https://user-gold-cdn.xitu.io/2019/9/29/16d7d4cac8f48e62?w=2000&h=1215&f=jpeg&s=190057" srcset="/img/loading.gif" alt="å­¦Android"></p>

            <hr>
          </div>
          <br>
          <div>
            
              <p>
                <i class="iconfont icon-inbox"></i>
                
                  <a class="hover-with-bg" href="/categories/Android">Android</a>
                  &nbsp;
                
              </p>
            
            <p>
              <i class="iconfont icon-tag"></i>
              
                <a class="hover-with-bg" href="/tags/SQLite">SQLite</a>
              
                <a class="hover-with-bg" href="/tags/%E7%BA%BF%E7%A8%8B%E5%AE%89%E5%85%A8">çº¿ç¨‹å®‰å…¨</a>
              
                <a class="hover-with-bg" href="/tags/%E5%B9%B6%E5%8F%91%E8%AE%BF%E9%97%AE">å¹¶å‘è®¿é—®</a>
              
            </p>
            
              <p class="note note-warning">æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a href="https://zh.wikipedia.org/wiki/Wikipedia:CC_BY-SA_3.0%E5%8D%8F%E8%AE%AE%E6%96%87%E6%9C%AC" rel="nofollow noopener">CC BY-SA 3.0åè®®</a> ã€‚è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼</p>
            
          </div>
        </div>
      </div>
    </div>
    <div class="d-none d-lg-block col-lg-2 toc-container">
      
  <div id="toc">
    <p class="h4"><i class="far fa-list-alt"></i>&nbsp;ç›®å½•</p>
    <div id="tocbot"></div>
  </div>

    </div>
  </div>
</div>

<!-- custom -->


<!-- Comments -->
<div class="col-lg-7 mx-auto nopadding-md">
  <div class="container comments mx-auto" id="comments">
    
      <br><br>
      
      
  <div id="gitalk-container"></div>
  <link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">
  <script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/blueimp-md5@2.11.1/js/md5.min.js"></script>
  <script type="text/javascript">
    var gitalk = new Gitalk({
      clientID: 'b490011b0888d5755e07',
      clientSecret: '032d235d0a00fedfc15850e426ad915f2e9a7278',
      repo: 'FishInWater-1999.github.io',
      owner: 'FishInWater-1999',
      admin: 'FishInWater-1999',
      id: md5(location.pathname),
      language: 'zh-CN',
      perPage: '15',
      pagerDirection: 'last',
      createIssueManually: 'true',
      distractionFreeMode: 'false'
    });

    gitalk.render('gitalk-container')
  </script>

    
  </div>
</div>
    
  </main>

  
    <a class="z-depth-1" id="scroll-top-button" href="#" role="button">
      <i class="fa fa-chevron-up scroll-top-arrow" aria-hidden="true"></i>
    </a>
  

  
    <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">æœç´¢</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v"
                 for="local-search-input">å…³é”®è¯</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>
  

  <footer class="mt-5">
  <div class="text-center py-3">
    <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><b>Hexo</b></a>
    <i class="iconfont icon-love"></i>
    <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"> <b>Fluid</b></a>
    <br>
    
  </div>
</footer>

<!-- SCRIPTS -->
<script src="/lib/jquery/jquery.min.js" ></script>
<script src="/lib/popper/popper.min.js" ></script>
<script src="/lib/bootstrap/js/bootstrap.min.js" ></script>
<script src="/lib/mdbootstrap/js/mdb.min.js" ></script>
<script src="/js/main.js" ></script>

  <script src="/js/lazyload.js" ></script>


  
    <script src="/lib/tocbot/tocbot.min.js" ></script>
  
  <script src="/js/post.js" ></script>


  <script src="/lib/prettify/prettify.min.js" ></script>
  <script>
    $(document).ready(function () {
      $('pre').addClass('prettyprint linenums');
      prettyPrint();
    })
  </script>


  <script src="/lib/typed/typed.min.js" ></script>
  <script>
    var typed = new Typed('#subtitle', {
      strings: [
        '  ',
        "é«˜æ•ˆè§£å†³ã€ŒSQLiteã€æ•°æ®åº“å¹¶å‘è®¿é—®å®‰å…¨é—®é¢˜ï¼Œåªè¿™ä¸€ç¯‡å°±å¤Ÿäº†&nbsp;",
      ],
      cursorChar: "_",
      typeSpeed: 70,
      loop: false,
    });
    typed.stop();
    $(document).ready(function () {
      $(".typed-cursor").addClass("h2");
      typed.start();
    });
  </script>


  <script src="/lib/anchor/anchor.min.js" ></script>
  <script>
    anchors.options = {
      placement: "right",
      visible: "false",
      
    };
    var el = "h1,h2,h3,h4,h5,h6".split(",");
    var res = [];
    for (item of el) {
      res.push(".markdown-body > " + item)
    }
    anchors.add(res.join(", "))
  </script>



  <script src="/js/local-search.js" ></script>
  <script>
    var path = "/local-search.xml";
    var inputArea = document.querySelector("#local-search-input");
    inputArea.onclick = function () {
      getSearchFile(path);
      this.onclick = null
    }
  </script>


</body>
</html>
