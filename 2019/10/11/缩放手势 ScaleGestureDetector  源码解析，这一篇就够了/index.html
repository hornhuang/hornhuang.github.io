<!DOCTYPE html>
<html lang="zh-CN">





<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/apple-touch-icon.png">
  <link rel="icon" type="image/png" href="/img/favicon.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="description" content="personal website of _yuanhao">
  <meta name="author" content="_yuanhao">
  <meta name="keywords" content="_yuanhao Hexo blogs github android google developer">
  <title>ç¼©æ”¾æ‰‹åŠ¿ ScaleGestureDetector  æºç è§£æï¼Œè¿™ä¸€ç¯‡å°±å¤Ÿäº† ~ _yuanhao</title>
  <link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
  <link rel="stylesheet" href="/lib/bootstrap/css/bootstrap.min.css">
  <link rel="stylesheet" href="/lib/mdbootstrap/css/mdb.min.css">
  <link rel="stylesheet" href="/lib/github-markdown/github-markdown.min.css">
  <link rel="stylesheet" href="https://at.alicdn.com/t/font_1067060_qzomjdt8bmp.css">
  
    <link rel="stylesheet" href="/lib/prettify/tomorrow-night-eighties.min.css">
  
  <link rel="stylesheet" href="/css/main.css">

  
</head>


<body>
  <header style="height: 70vh;">
    <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand"
       href="/">&nbsp;<strong>_yuanhao</strong>&nbsp;</a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          <li class="nav-item">
            <a class="nav-link" href="/">Home</a>
          </li>
        
          
          
          <li class="nav-item">
            <a class="nav-link" href="/archives/">Archives</a>
          </li>
        
          
          
          <li class="nav-item">
            <a class="nav-link" href="/categories/">Categories</a>
          </li>
        
          
          
          <li class="nav-item">
            <a class="nav-link" href="/tags/">Tags</a>
          </li>
        
          
          
          <li class="nav-item">
            <a class="nav-link" href="/about/">About</a>
          </li>
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" data-toggle="modal" data-target="#modalSearch">&nbsp;&nbsp;<i
                class="iconfont icon-search"></i>&nbsp;&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>


</nav>

    <div class="view intro-2"
         style="background: url('/img/default.png')no-repeat center center;
           background-size: cover;
           background-attachment: fixed;">
      <div class="full-bg-img">
        <div class="mask rgba-black-light flex-center">
          <div class="container text-center white-text fadeInUp">
            <span class="h2" id="subtitle">
              
            </span>

            
              <br>
              <p>æ˜ŸæœŸäº”, åæœˆ 11æ—¥ 2019, 11:11 æ™šä¸Š</p>
            
          </div>

          
        </div>
      </div>
    </div>
  </header>

  <main>
    
      

<div class="container-fluid">
  <div class="row">
    <div class="d-none d-lg-block col-lg-2"></div>
    <div class="col-lg-8 nopadding-md">
      <div class="py-5 z-depth-3" id="board">
        <div class="post-content mx-auto">
          <div class="markdown-body">
            <p>å…¶å®åœ¨æˆ‘ä»¬æ—¥å¸¸çš„ç¼–ç¨‹ä¸­ï¼Œå¯¹äºç¼©æ”¾æ‰‹åŠ¿çš„ä½¿ç”¨å¹¶ä¸æ˜¯å¾ˆç»å¸¸ï¼Œè¿™ä¸€æ‰‹åŠ¿ä¸»è¦æ˜¯ç”¨åœ¨å›¾ç‰‡æµè§ˆæ–¹é¢ï¼Œæ¯”å¦‚ä¸‹æ–¹ä¾‹å­ã€‚ä½†æ˜¯ï¼ˆæ•²é‡ç‚¹ï¼‰ï¼Œä½œä¸º Android å…¥é—¨çš„åŸºç¡€æ¥è¯´ï¼Œå­¦ä¹  ScaleGestureDetector çš„ä½¿ç”¨ï¼Œç®—æ˜¯ä¸å¾—ä¸è¿‡çš„ä¸€é“åï¼Œå¥½åœ¨ ScaleGestureDetector ä½¿ç”¨èµ·æ¥éå¸¸ç®€å•ï¼Œå°±æ˜¯æºç åˆ†æä¸Šå¾—èŠ±äº›åŠŸå¤«ã€‚</p>
<blockquote>
<p>æœ¬æ–‡é¦–å…ˆå°†ç®€å•çš„ä»‹ç»ä¸‹ ScaleGestureDetector çš„ä½¿ç”¨ï¼Œåœ¨é‡ç‚¹ç»™å¤§å®¶åˆ†æä¸‹æºç ï¼ˆç”±äºæºç æ–¹é¢æ˜¯æˆ‘è‡ªå·±çš„ç†è§£ï¼Œå¯èƒ½æœ‰åå·®ï¼Œå¸Œæœ›å„ä½å¤§ä½¬èƒ½åœ¨è¯„è®ºåŒºæŒ‡å‡ºï¼Œä¸‡åˆ†æ„Ÿè°¢ï½ï¼‰</p>
</blockquote>
<img src="https://user-gold-cdn.xitu.io/2019/6/27/16b996688722ec94?w=1280&h=904&f=jpeg&s=235091" srcset="/img/loading.gif" width="500" height="300" align="center">

<hr>
<h1 id="ScaleGestureDetector-ä½¿ç”¨"><a href="#ScaleGestureDetector-ä½¿ç”¨" class="headerlink" title="ScaleGestureDetector ä½¿ç”¨"></a>ScaleGestureDetector ä½¿ç”¨</h1><p>ScaleGestureDetector åŒ…æ‹¬ä¸€ä¸ªç›‘å¬å™¨ï¼Œä»¥åŠå®ƒæ‰€æœ‰æ–¹æ³•çš„ç©ºå®ç°ï¼š</p>
<table>
<thead>
<tr>
<th>åç§°</th>
<th>ç”¨é€”</th>
</tr>
</thead>
<tbody><tr>
<td>ScaleGestureDetector</td>
<td>ç¼©æ”¾æ‰‹åŠ¿çš„ç›‘å¬å™¨</td>
</tr>
<tr>
<td>SimpleOnScaleGestureListener</td>
<td>è¯¥ç›‘å¬å™¨çš„ç©ºå®ç°ï¼Œåœ¨å…¶ä¸­é‡å†™æ–¹æ³•</td>
</tr>
</tbody></table>
<h3 id="ScaleGestureDetector-æ–¹æ³•"><a href="#ScaleGestureDetector-æ–¹æ³•" class="headerlink" title="ScaleGestureDetector æ–¹æ³•"></a>ScaleGestureDetector æ–¹æ³•</h3><table>
<thead>
<tr>
<th>åç§°</th>
<th>ç”¨é€”</th>
</tr>
</thead>
<tbody><tr>
<td>onScaleBegin</td>
<td>å½“ &gt;= 2 ä¸ªæ‰‹æŒ‡ç¢°è§¦å±å¹•æ—¶è°ƒç”¨ï¼Œè‹¥è¿”å› false åˆ™å¿½ç•¥æ”¹äº‹ä»¶è°ƒç”¨</td>
</tr>
<tr>
<td>onScale</td>
<td>æ»‘åŠ¨ï¼ˆç¼©æ”¾ï¼‰è¿‡ç¨‹ä¸­è°ƒç”¨ï¼Œè‹¥æˆåŠŸå¤„ç†ï¼Œåˆ™ç”¨æˆ·è¿”å› trueï¼Œç›‘å¬å™¨ç»§ç»­è®°å½•ä¸‹ä¸€ä¸ªç¼©æ”¾ç­‰åŠ¨ä½œï¼Œè‹¥ä¸º false è¡¨æ˜æ•°æ®æœªå¤„ç†ï¼Œåˆ™ç›‘å¬å™¨ç»§ç»­ç§¯ç´¯</td>
</tr>
<tr>
<td>onScaleEnd</td>
<td>å…¨éƒ¨æ‰‹æŒ‡ç¦»å¼€å±å¹•ï¼Œç»“æŸç›‘å¬</td>
</tr>
</tbody></table>
<p>é€šå¸¸æƒ…å†µä¸‹ï¼Œæ‰‹åŠ¿ç›‘å¬ä¼šç»“åˆè‡ªå®šä¹‰ View æ¥è®²ï¼Œè¿™é‡Œæˆ‘ç»™å‡ºä¸€ä¸ªæœ€ç®€å•çš„ä½¿ç”¨ï¼Œå…·ä½“çš„ä½¿ç”¨å®ä¾‹ï¼Œä»¥åå†ç»“åˆè‡ªå®šä¹‰ View è®²è®²ã€‚</p>
<pre><code class="java">    private void iniScaleGestureListener(){
        mListener = new ScaleGestureDetector.SimpleOnScaleGestureListener(){
            @Override
            public boolean onScaleBegin(ScaleGestureDetector detector) {
                return super.onScaleBegin(detector);
            }

            @Override
            public boolean onScale(ScaleGestureDetector detector) {
                MyLog.d(&quot;X:&quot; + detector.getFocusX());
                MyLog.d(&quot;Y:&quot; + detector.getFocusY());
                MyLog.d(&quot;scale:&quot; + detector.getScaleFactor());
                return super.onScale(detector);
            }

            @Override
            public void onScaleEnd(ScaleGestureDetector detector) {
                super.onScaleEnd(detector);
            }
        };

        detector = new ScaleGestureDetector(getContext(), mListener);
    }

    @Override
    public boolean onTouchEvent(MotionEvent event) {
        detector.onTouchEvent(event);
        return true;
    }</code></pre>
<hr>
<h1 id="ScaleGestureDetector-çš„ä½¿ç”¨"><a href="#ScaleGestureDetector-çš„ä½¿ç”¨" class="headerlink" title="ScaleGestureDetector çš„ä½¿ç”¨"></a>ScaleGestureDetector çš„ä½¿ç”¨</h1><p>ScaleGestureDetector åœ¨å…·ä½“é¡¹ç›®çš„ä½¿ç”¨æœ‰ç‚¹å¤æ‚ï¼Œæˆ‘æ‰“ç®—è¿‡æ®µæ—¶é—´ç»“åˆè‡ªå®šä¹‰ View å†™ä¸€ç¯‡ç”¨æ¥æ€»ç»“ï¼Œæ‰€ä»¥è¿™ç¯‡æˆ‘ä»¬å°±å…ˆäº†è§£ä¸‹ ScaleGestureDetector çš„åŸºæœ¬ä½¿ç”¨ã€‚</p>
<hr>
<h1 id="ScaleGestureDetector-æºç åˆ†æ"><a href="#ScaleGestureDetector-æºç åˆ†æ" class="headerlink" title="ScaleGestureDetector æºç åˆ†æ"></a>ScaleGestureDetector æºç åˆ†æ</h1><p>å¥½äº†ï¼Œç°åœ¨æˆ‘ä»¬è¿›å…¥æœ¬ç« é‡ç‚¹ï¼ŒScaleGestureDetector æºç åˆ†æï¼Œæ•²é»‘æ¿æ•²é»‘æ¿ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬æ‰“å¼€ ScaleGestureDetector çš„æºç å¯ä»¥çœ‹åˆ°ï¼Œå‡ ä¹æ‰€æœ‰çš„ä»£ç éƒ½é›†ä¸­åœ¨äº† onTouchEvent è¿™ä¸ªæ–¹æ³•ä¸Šï¼Œæ‰€ä»¥åœ¨è¿™é‡Œï¼Œæˆ‘å°±ä¸»è¦ç»™å¤§å®¶ä»‹ç»è¿™ä¸ªæ–¹æ³•çš„å®ç°ã€‚</p>
<h2 id="ç¬¬ä¸€éƒ¨åˆ†ï¼šå‰æœŸå‡†å¤‡"><a href="#ç¬¬ä¸€éƒ¨åˆ†ï¼šå‰æœŸå‡†å¤‡" class="headerlink" title="ç¬¬ä¸€éƒ¨åˆ†ï¼šå‰æœŸå‡†å¤‡"></a>ç¬¬ä¸€éƒ¨åˆ†ï¼šå‰æœŸå‡†å¤‡</h2><pre><code class="java">        if (mInputEventConsistencyVerifier != null) {
            mInputEventConsistencyVerifier.onTouchEvent(event, 0);
        }

        mCurrTime = event.getEventTime();

        final int action = event.getActionMasked();

        // Forward the event to check for double tap gesture
        if (mQuickScaleEnabled) {
            mGestureDetector.onTouchEvent(event);
        }

        final int count = event.getPointerCount();
        final boolean isStylusButtonDown =
                (event.getButtonState() &amp; MotionEvent.BUTTON_STYLUS_PRIMARY) != 0;</code></pre>
<h3 id="mInputEventConsistencyVerifier"><a href="#mInputEventConsistencyVerifier" class="headerlink" title="mInputEventConsistencyVerifier"></a>mInputEventConsistencyVerifier</h3><ul>
<li>è¾“å…¥äº‹ä»¶ä¸€è‡´æ€§éªŒè¯å™¨ @æœ‰é“</li>
<li>æ ¹æ®åå­—ä»¥åŠå‰é¢çš„å®šä¹‰</li>
<li>æˆ‘ä»¬å¯ä»¥çŒœæµ‹è¿™ä¸ªå¯¹è±¡åº”è¯¥æ˜¯æ‰‹åŠ¿ç›‘å¬ Event æ˜¯å¦æ³¨å†Œï¼ˆè¿æ¥åˆ°ç¡¬ä»¶ï¼‰</li>
<li>æ‰€ä»¥ï¼Œå¦‚æœä»–ä¸ºç©ºï¼Œé‚£ä¹ˆæˆ‘ä»¬åœ¨è¿™é‡Œè°ƒç”¨ onTouchEvent è¿›è¡Œæ³¨å†Œ</li>
</ul>
<pre><code class="java">        if (mInputEventConsistencyVerifier != null) {
            mInputEventConsistencyVerifier.onTouchEvent(event, 0);
        }</code></pre>
<h3 id="mCurrTime"><a href="#mCurrTime" class="headerlink" title="mCurrTime"></a>mCurrTime</h3><ul>
<li>è·å¾—äº‹ä»¶å‘ç”Ÿæ—¶çš„æ—¶é—´</li>
</ul>
<pre><code class="java">        mCurrTime = event.getEventTime();</code></pre>
<h3 id="action"><a href="#action" class="headerlink" title="action"></a>action</h3><ul>
<li>è·å¾—äº‹ä»¶ç±»å‹</li>
</ul>
<pre><code class="java">        final int action = event.getActionMasked();</code></pre>
<h3 id="mQuickScaleEnabled"><a href="#mQuickScaleEnabled" class="headerlink" title="mQuickScaleEnabled"></a>mQuickScaleEnabled</h3><ul>
<li>Forward the event to check for double tap gesture</li>
<li>@æœ‰é“ è½¬å‘äº‹ä»¶ä»¥æ£€æŸ¥åŒå‡»æ‰‹åŠ¿</li>
<li>é¦–å…ˆæ˜¯ mQuickScaleEnabled è¿™ä¸ªå¯¹è±¡</li>
<li>ç¿»è¯‘è¿‡æ¥æ˜¯ï¼š @æœ‰é“ å¯ç”¨å¿«é€Ÿæ‰©å±•</li>
<li>ä½œç”¨å¤§æ¦‚å°±æ˜¯è°ƒç”¨åŒå‡»ç›‘å¬äº‹ä»¶ï¼Œæ¯”å¦‚åŒå‡»æœ€å¤§åŒ–</li>
</ul>
<pre><code class="java">        if (mQuickScaleEnabled) {
            mGestureDetector.onTouchEvent(event);
        }</code></pre>
<h3 id="count"><a href="#count" class="headerlink" title="count"></a>count</h3><ul>
<li>è·å¾—å±å¹•ä¸Šæ‰‹æŒ‡çš„æ•°ç›®</li>
</ul>
<pre><code class="java">        final int count = event.getPointerCount();</code></pre>
<h3 id="isStylusButtonDown"><a href="#isStylusButtonDown" class="headerlink" title="isStylusButtonDown"></a>isStylusButtonDown</h3><p> è¿™ä¸ªä¸»è¦æ˜¯ç”±äºåˆ¤æ–­æ‰‹å†™ç¬”æ˜¯å¦æŒ‰ä¸‹<br> ç”±äºæˆ‘ä»¬å¾ˆå°‘å¤„ç†æ‰‹å†™ç¬”ï¼Œæ‰€ä»¥è¿™é‡Œä¸åšè¿‡å¤šè¯´æ˜</p>
<pre><code class="java">         final boolean isStylusButtonDown =
                (event.getButtonState() &amp; MotionEvent.BUTTON_STYLUS_PRIMARY) != 0;</code></pre>
<hr>
<h2 id="ç¬¬äºŒéƒ¨åˆ†ï¼šå¤„ç†ä¸æ‰‹åŠ¿å˜åŒ–"><a href="#ç¬¬äºŒéƒ¨åˆ†ï¼šå¤„ç†ä¸æ‰‹åŠ¿å˜åŒ–" class="headerlink" title="ç¬¬äºŒéƒ¨åˆ†ï¼šå¤„ç†ä¸æ‰‹åŠ¿å˜åŒ–"></a>ç¬¬äºŒéƒ¨åˆ†ï¼šå¤„ç†ä¸æ‰‹åŠ¿å˜åŒ–</h2><p> ç”¨æˆ·çš„ç¼©æ”¾æ‰‹åŠ¿ä¸æ€»æ˜¯ä¸€å®šçš„ï¼Œå°±æ˜¯è¯´å¯¹äºç”¨æˆ·è€Œè¨€ï¼Œéšæ—¶å¯èƒ½æœ‰æ‰‹æŒ‡ç¢°è§¦æˆ–ç¦»å¼€å±å¹•ï¼Œè¿™å°±ä½¿å¾—ç¼©æ”¾ä¸­å¿ƒçš„ï¼ˆç„¦ç‚¹ï¼‰éšæ—¶å¯èƒ½å‘ç”Ÿå˜åŒ–ï¼Œè¿™éƒ¨åˆ†ä¸»è¦æ˜¯ç”¨æ¥å¤„ç†è¿™ä¸€å˜åŒ–ï¼Œå¹¶åšå‡ºå“åº”ã€‚</p>
<pre><code class="java">         final boolean anchoredScaleCancelled =
                mAnchoredScaleMode == ANCHORED_SCALE_MODE_STYLUS &amp;&amp; !isStylusButtonDown;

        final boolean streamComplete = action == MotionEvent.ACTION_UP ||
                action == MotionEvent.ACTION_CANCEL || anchoredScaleCancelled;

        // å¦‚æœå‘ç”Ÿäº†ä¸Šé¢è¿™ç§å°åŠ¨ä½œï¼Œæˆ–è€…è¯´æœ‰ä¸€æ‰‹æŒ‡ç¦»å¼€äº†å±å¹•ï¼Œè¿›è¡Œè°ƒç”¨
        if (action == MotionEvent.ACTION_DOWN || streamComplete) {
            // Reset any scale in progress with the listener.
            // If it&#39;s an ACTION_DOWN we&#39;re beginning a new event stream.
            // This means the app probably didn&#39;t give us all the events. Shame on it.

            if (mInProgress) {
                mListener.onScaleEnd(this);
                mInProgress = false;
                mInitialSpan = 0;
                mAnchoredScaleMode = ANCHORED_SCALE_MODE_NONE;
            } else if (inAnchoredScaleMode() &amp;&amp; streamComplete) {
                mInProgress = false;
                mInitialSpan = 0;
                mAnchoredScaleMode = ANCHORED_SCALE_MODE_NONE;
            }

            if (streamComplete) {
                return true;
            }
        }</code></pre>
<h3 id="anchoredScaleCancelled"><a href="#anchoredScaleCancelled" class="headerlink" title="anchoredScaleCancelled"></a>anchoredScaleCancelled</h3><ul>
<li>@Google é”šå®šè§„æ¨¡å–æ¶ˆ</li>
<li>æˆ‘çš„ç†è§£æ˜¯ï¼šç”¨äºåˆ¤æ–­æ»‘åŠ¨äº‹ä»¶æ˜¯å¦è¢«å–æ¶ˆ</li>
</ul>
<pre><code class="java">        final boolean anchoredScaleCancelled =
                mAnchoredScaleMode == ANCHORED_SCALE_MODE_STYLUS &amp;&amp; !isStylusButtonDown;</code></pre>
<h3 id="streamComplete"><a href="#streamComplete" class="headerlink" title="streamComplete"></a>streamComplete</h3><ul>
<li>@Google Translate: æµå®Œæˆ</li>
<li>æˆ‘çš„ç†è§£æ˜¯ï¼Œè¿™ä¸ªå¸ƒå°”å˜é‡ç”¨äºæ ‡è®°</li>
<li>å½“å‰åŠ¨ä½œæ˜¯å¦å®Œæˆ</li>
<li>æˆ‘è¿™é‡Œè¯´çš„åŠ¨ä½œæœ‰ä¸¤ç§</li>
<li>è¿™é‡ŒæŒ‡çš„æ˜¯ï¼šåœ¨å¤§åŠ¨ä½œå¦‚ä¸‰æŒ‡è§¦å±æ”¾å¤§è¿‡ç¨‹ä¸­ï¼Œåˆä¸€ä¸ªæ‰‹æŒ‡ç¦»å¼€äº†å±å¹•è¿™ç§</li>
<li>åœ¨å¤§åŠ¨ä½œä¸‰æŒ‡è§¦å±ä¸­å‘ç”Ÿçš„ä¸€ä¸ªå°åŠ¨ä½œï¼Œç¦»å¼€ä¸€æŒ‡</li>
</ul>
<pre><code class="java">        final boolean streamComplete = action == MotionEvent.ACTION_UP ||
                action == MotionEvent.ACTION_CANCEL || anchoredScaleCancelled;</code></pre>
<h3 id="action-MotionEvent-ACTION-DOWN-streamComplete"><a href="#action-MotionEvent-ACTION-DOWN-streamComplete" class="headerlink" title="action == MotionEvent.ACTION_DOWN || streamComplete"></a>action == MotionEvent.ACTION_DOWN || streamComplete</h3><ul>
<li>å¦‚æœå‘ç”Ÿäº†ä¸Šé¢è¿™ç§å°åŠ¨ä½œï¼Œæˆ–è€…è¯´æœ‰ä¸€æ‰‹æŒ‡ç¦»å¼€äº†å±å¹•ï¼Œå°±è¿›è¡Œè°ƒç”¨</li>
</ul>
<pre><code class="java">if (action == MotionEvent.ACTION_DOWN || streamComplete) {...}</code></pre>
<h3 id="if-mInProgress"><a href="#if-mInProgress" class="headerlink" title="if (mInProgress)"></a>if (mInProgress)</h3><ul>
<li>@google Translateï¼šé‡ç½®ä¾¦å¬å™¨æ­£åœ¨è¿›è¡Œçš„ä»»ä½•ç¼©æ”¾ã€‚</li>
<li>å¦‚æœæ˜¯ACTION_DOWNï¼Œæˆ‘ä»¬å¼€å§‹ä¸€ä¸ªæ–°çš„äº‹ä»¶æµã€‚</li>
<li>è¿™æ„å‘³ç€åº”ç”¨ç¨‹åºå¯èƒ½æ²¡æœ‰ç»™æˆ‘ä»¬æ‰€æœ‰çš„äº‹ä»¶ã€‚å¾ˆé—æ†¾ã€‚</li>
<li>é¦–å…ˆåˆ¤æ–­è¯¥è¿›ç¨‹ï¼ˆä»ç¬¬ä¸€ä¸ªæ‰‹æŒ‡ç¢°ä¸Šå±å¹•ï¼Œåˆ°æœ€åä¸€ä¸ªæ‰‹æŒ‡ç¦»å¼€å±å¹•ä¸ºæ­¢ï¼‰æ˜¯å¦ç»“æŸ</li>
<li>å¦‚æœä»åœ¨è¿è¡Œä¸­ï¼Œè¿™è°ƒç”¨å›è°ƒæ–¹æ³•ï¼šonScaleEnd ä½¿å…¶ç»“æŸ</li>
</ul>
<pre><code class="java">            if (mInProgress) {
                mListener.onScaleEnd(this);
                mInProgress = false;
                mInitialSpan = 0;
                mAnchoredScaleMode = ANCHORED_SCALE_MODE_NONE;
            }</code></pre>
<h3 id="else-if-inAnchoredScaleMode-amp-amp-streamComplete"><a href="#else-if-inAnchoredScaleMode-amp-amp-streamComplete" class="headerlink" title="else if (inAnchoredScaleMode() &amp;&amp; streamComplete)"></a>else if (inAnchoredScaleMode() &amp;&amp; streamComplete)</h3><ul>
<li>å¦‚æœå½“å‰è¿›ç¨‹å·²ç»ç»“æŸ</li>
<li>åˆ¤æ–­ mAnchoredScaleMode æ˜¯å¦ä¸º ANCHORED_SCALE_MODE_STYLUS çŠ¶æ€</li>
<li>åŒæ—¶åˆ¤æ–­æ“ä½œæµ streamComplete æ˜¯å¦å®Œæˆ</li>
<li>éƒ½ç¬¦åˆçš„æƒ…å†µä¸‹ç»“æŸè¿™ä¸€æ‰‹åŠ¿å˜åŒ–</li>
</ul>
<pre><code class="java">            else if (inAnchoredScaleMode() &amp;&amp; streamComplete) {
                mInProgress = false;
                mInitialSpan = 0;
                mAnchoredScaleMode = ANCHORED_SCALE_MODE_NONE;
            }</code></pre>
<h3 id="if-streamComplete"><a href="#if-streamComplete" class="headerlink" title="if (streamComplete)"></a>if (streamComplete)</h3><ul>
<li>ç»“æŸæœ¬æ¬¡ onTouchEvent æ–¹æ³•çš„è°ƒç”¨ï¼Œç­‰å¾…ä¸‹ä¸€æ¬¡è°ƒç”¨å‘ç”Ÿ</li>
</ul>
<pre><code class="java">            if (streamComplete) {
                return true;
            }</code></pre>
<p>æ€»ç»“ï¼š å¯ä»¥çœ‹åˆ°ï¼Œå½“è§¦å‘ down æˆ–è€…è§¦å‘ upï¼Œcancel æ—¶ï¼Œå¦‚æœä¹‹å‰å¤„äºç¼©æ”¾è®¡ç®—çš„çŠ¶æ€ï¼Œä¼šå°†å…¶çŠ¶æ€é‡ç½®ï¼Œ å¹¶è°ƒç”¨ onScaleEnd æ–¹æ³•ã€‚</p>
<hr>
<h2 id="è¿›å…¥é”šå®šæ¯”ä¾‹æ¨¡å¼"><a href="#è¿›å…¥é”šå®šæ¯”ä¾‹æ¨¡å¼" class="headerlink" title="è¿›å…¥é”šå®šæ¯”ä¾‹æ¨¡å¼"></a>è¿›å…¥é”šå®šæ¯”ä¾‹æ¨¡å¼</h2><ul>
<li>å½“åˆ¤æ–­ç”¨æˆ·åŠ¨ä½œï¼Œå¦‚æœä¸ºåŒå‡»è¿™ç±»ç‚¹å‡»äº‹ä»¶ï¼Œè¿›å…¥è¯¥æ¨¡å¼</li>
<li>ä¸æ­£å¸¸ç¼©æ”¾åŒºåˆ†ã€‚è¿™ä¸ªæ¨¡å¼åŠŸèƒ½ä¸€èˆ¬æ˜¯ï¼šåŒå‡»æœ€å¤§åŒ–å’Œæœ€å°åŒ–</li>
</ul>
<pre><code class="java">        if (!mInProgress &amp;&amp; mStylusScaleEnabled &amp;&amp; !inAnchoredScaleMode()
                &amp;&amp; !streamComplete &amp;&amp; isStylusButtonDown) {
            // Start of a button scale gesture
            mAnchoredScaleStartX = event.getX();
            mAnchoredScaleStartY = event.getY();
            mAnchoredScaleMode = ANCHORED_SCALE_MODE_STYLUS;
            mInitialSpan = 0;
        }</code></pre>
<h3 id="mAnchoredScaleStartX-amp-mAnchoredScaleStartY"><a href="#mAnchoredScaleStartX-amp-mAnchoredScaleStartY" class="headerlink" title="mAnchoredScaleStartX &amp; mAnchoredScaleStartY"></a>mAnchoredScaleStartX &amp; mAnchoredScaleStartY</h3><ul>
<li>åæ–‡ä¸­å°†ç”¨äºé‡æ–°è®¡ç®—ç„¦ç‚¹</li>
</ul>
<pre><code class="java">            mAnchoredScaleStartX = event.getX();
            mAnchoredScaleStartY = event.getY();</code></pre>
<h3 id="mAnchoredScaleMode"><a href="#mAnchoredScaleMode" class="headerlink" title="mAnchoredScaleMode"></a>mAnchoredScaleMode</h3><ul>
<li>èµ‹å€¼ä¹‹åï¼Œå†æ¬¡è°ƒç”¨ inAnchoredScaleMode() æ–¹æ³•ï¼Œè¿”å›å€¼å˜ä¸º true</li>
</ul>
<pre><code class="java">            mAnchoredScaleMode = ANCHORED_SCALE_MODE_STYLUS;</code></pre>
<h2 id="è®¡ç®—ç¼©æ”¾ä¸­å¿ƒ"><a href="#è®¡ç®—ç¼©æ”¾ä¸­å¿ƒ" class="headerlink" title="è®¡ç®—ç¼©æ”¾ä¸­å¿ƒ"></a>è®¡ç®—ç¼©æ”¾ä¸­å¿ƒ</h2><pre><code class="java">        final boolean configChanged = action == MotionEvent.ACTION_DOWN ||
                action == MotionEvent.ACTION_POINTER_UP ||
                action == MotionEvent.ACTION_POINTER_DOWN || anchoredScaleCancelled;

        final boolean pointerUp = action == MotionEvent.ACTION_POINTER_UP;
        final int skipIndex = pointerUp ? event.getActionIndex() : -1;

        // Determine focal point
        float sumX = 0, sumY = 0;
        final int div = pointerUp ? count - 1 : count;
        final float focusX;
        final float focusY;
        if (inAnchoredScaleMode()) {
            // In anchored scale mode, the focal pt is always where the double tap
            // or button down gesture started
            focusX = mAnchoredScaleStartX;
            focusY = mAnchoredScaleStartY;
            if (event.getY() &lt; focusY) {
                mEventBeforeOrAboveStartingGestureEvent = true;
            } else {
                mEventBeforeOrAboveStartingGestureEvent = false;
            }
        } else {
            for (int i = 0; i &lt; count; i++) {
                if (skipIndex == i) continue;
                sumX += event.getX(i);
                sumY += event.getY(i);
            }

            focusX = sumX / div;
            focusY = sumY / div;
        }</code></pre>
<h3 id="configChanged"><a href="#configChanged" class="headerlink" title="configChanged"></a>configChanged</h3><ul>
<li>å¸ƒå°”ç±»å‹é‡ï¼Œæ ‡å¿—ç€ä¸€ä¸ªæ“ä½œçš„å®Œæˆæˆ–è€…ç»“æŸï¼ˆæ‰‹æŒ‡ç¦»å¼€ï¼Œæ‰‹æŒ‡æŒ‰ä¸‹ï¼‰</li>
</ul>
<pre><code class="java">        final boolean configChanged = action == MotionEvent.ACTION_DOWN ||
                action == MotionEvent.ACTION_POINTER_UP ||
                action == MotionEvent.ACTION_POINTER_DOWN || anchoredScaleCancelled;</code></pre>
<h3 id="pointerUp"><a href="#pointerUp" class="headerlink" title="pointerUp"></a>pointerUp</h3><ul>
<li>å¸ƒå°”ç±»å‹é‡ï¼Œç”¨äºåˆ¤æ–­å½“å‰åŠ¨ä½œï¼Œæ˜¯å¦ä¸ºæ‰‹æŒ‡ç¦»å¼€ï¼ˆæŠ¬èµ·åŠ¨ä½œï¼‰</li>
</ul>
<pre><code class="java">        final boolean pointerUp = action == MotionEvent.ACTION_POINTER_UP;</code></pre>
<h3 id="skipIndex"><a href="#skipIndex" class="headerlink" title="skipIndex"></a>skipIndex</h3><ul>
<li>æ ‡è®°é‡ï¼Œåœ¨æ˜¯æ‰‹æŒ‡ç¦»å¼€çš„æƒ…å†µä¸‹ï¼Œæ ‡è®°ç¦»å¼€æ‰‹æŒ‡</li>
<li>åœ¨åé¢è®¡ç®—æ–°çš„ç„¦ç‚¹ä»£ç ä¸­ï¼Œè·³è¿‡è¯¥æ‰‹æŒ‡çš„æ ‡è®°ç‚¹åæ ‡ï¼Œè¿›è¡Œè®¡ç®—</li>
</ul>
<pre><code class="java">        final int skipIndex = pointerUp ? event.getActionIndex() : -1;</code></pre>
<h3 id="åˆå§‹åŒ–è®¡ç®—æ‰€éœ€ä¸´æ—¶å˜é‡"><a href="#åˆå§‹åŒ–è®¡ç®—æ‰€éœ€ä¸´æ—¶å˜é‡" class="headerlink" title="åˆå§‹åŒ–è®¡ç®—æ‰€éœ€ä¸´æ—¶å˜é‡"></a>åˆå§‹åŒ–è®¡ç®—æ‰€éœ€ä¸´æ—¶å˜é‡</h3><pre><code class="java">        // Determine focal point
        float sumX = 0, sumY = 0;
        // å¦‚æœæ˜¯æŠ¬èµ·æ‰‹æŒ‡ï¼Œåˆ™å½“å‰æ‰‹æŒ‡æ•°å‡1ï¼Œå¦åˆ™ä¸å˜
        final int div = pointerUp ? count - 1 : count;
        final float focusX;
        final float focusY;</code></pre>
<h3 id="åˆ¤æ–­æ˜¯å¦ä¸ºé”šå®šæ¯”ä¾‹æ¨¡å¼"><a href="#åˆ¤æ–­æ˜¯å¦ä¸ºé”šå®šæ¯”ä¾‹æ¨¡å¼" class="headerlink" title="åˆ¤æ–­æ˜¯å¦ä¸ºé”šå®šæ¯”ä¾‹æ¨¡å¼"></a>åˆ¤æ–­æ˜¯å¦ä¸ºé”šå®šæ¯”ä¾‹æ¨¡å¼</h3><ul>
<li>æ˜¯çš„è¯ç›´æ¥å°†ç‚¹å‡»æ—¶è®°ä¸‹çš„ç‚¹ï¼Œä½œä¸ºç„¦ç‚¹</li>
<li>ä¸æ˜¯çš„è¯ï¼ŒæŠŠæ‰€æœ‰ç‚¹ç´¯åŠ æ±‚å’Œï¼Œé™¤ä»¥æ€»ä¸ªæ•°ï¼Œè®¡ç®—å¹³å‡å€¼</li>
</ul>
<pre><code class="java">        if (inAnchoredScaleMode()) {
            // In anchored scale mode, the focal pt is always where the double tap
            // or button down gesture started
            // åœ¨é”šå®šæ¯”ä¾‹æ¨¡å¼ä¸­ï¼Œç„¦ç‚¹ptå§‹ç»ˆæ˜¯åŒå‡»çš„ä½ç½®ï¼Œæˆ–æŒ‰ä¸‹æ‰‹åŠ¿å¼€å§‹
            focusX = mAnchoredScaleStartX;
            focusY = mAnchoredScaleStartY;
            if (event.getY() &lt; focusY) {
                mEventBeforeOrAboveStartingGestureEvent = true;
            } else {
                mEventBeforeOrAboveStartingGestureEvent = false;
            }
        } else {
            for (int i = 0; i &lt; count; i++) {
                if (skipIndex == i) continue;
                sumX += event.getX(i);
                sumY += event.getY(i);
            }

            focusX = sumX / div;
            focusY = sumY / div;
        }</code></pre>
<hr>
<h2 id="ç®—ç¼©æ”¾æ¯”ä¾‹"><a href="#ç®—ç¼©æ”¾æ¯”ä¾‹" class="headerlink" title="ç®—ç¼©æ”¾æ¯”ä¾‹"></a>ç®—ç¼©æ”¾æ¯”ä¾‹</h2><ul>
<li>è®¡ç®—ç¼©æ”¾æ¯”ä¾‹ä¹Ÿå¾ˆç®€å•ï¼Œå°±æ˜¯è®¡ç®—å„ä¸ªæ‰‹æŒ‡åˆ°ç„¦ç‚¹çš„å¹³å‡è·ç¦»ï¼Œåœ¨ç”¨æˆ·æ‰‹æŒ‡ç§»åŠ¨åç”¨æ–°çš„å¹³å‡è·ç¦»é™¤ä»¥æ—§çš„å¹³å‡è·ç¦»ï¼Œå¹¶ä»¥æ­¤è®¡ç®—å¾—å‡ºç¼©æ”¾æ¯”ä¾‹ã€‚</li>
</ul>
<pre><code class="java">        // Determine average deviation from focal point @Google translate 
        float devSumX = 0, devSumY = 0;
        for (int i = 0; i &lt; count; i++) {
            if (skipIndex == i) continue;

            // Convert the resulting diameter into a radius.
            devSumX += Math.abs(event.getX(i) - focusX);
            devSumY += Math.abs(event.getY(i) - focusY);
        }
        final float devX = devSumX / div;
        final float devY = devSumY / div;

        // Span is the average distance between touch points through the focal point;
        // i.e. the diameter of the circle with a radius of the average deviation from
        // the focal point.
        final float spanX = devX * 2;
        final float spanY = devY * 2;
        final float span;
        if (inAnchoredScaleMode()) {
            span = spanY;
        } else {
            span = (float) Math.hypot(spanX, spanY);
        }</code></pre>
<h3 id="è®¡ç®—å¹³å‡åå·®"><a href="#è®¡ç®—å¹³å‡åå·®" class="headerlink" title="è®¡ç®—å¹³å‡åå·®"></a>è®¡ç®—å¹³å‡åå·®</h3><ul>
<li>ç¡®å®šç„¦ç‚¹çš„å¹³å‡åå·®</li>
</ul>
<pre><code class="java">        float devSumX = 0, devSumY = 0;
        for (int i = 0; i &lt; count; i++) {
            if (skipIndex == i) continue;

            // Convert the resulting diameter into a radius.
            devSumX += Math.abs(event.getX(i) - focusX);
            devSumY += Math.abs(event.getY(i) - focusY);
        }
        final float devX = devSumX / div;
        final float devY = devSumY / div;</code></pre>
<h3 id="è®¡ç®—ç¼©æ”¾æ¯”ä¾‹"><a href="#è®¡ç®—ç¼©æ”¾æ¯”ä¾‹" class="headerlink" title="è®¡ç®—ç¼©æ”¾æ¯”ä¾‹"></a>è®¡ç®—ç¼©æ”¾æ¯”ä¾‹</h3><ul>
<li>è·¨åº¦æ˜¯é€šè¿‡ç„¦ç‚¹çš„è§¦æ‘¸ç‚¹ä¹‹é—´çš„å¹³å‡è·ç¦»;</li>
<li>å³åœ†çš„ç›´å¾„ï¼Œå…¶åŠå¾„ä¸ºå¹³å‡åå·®</li>
<li>è¿™é‡Œçš„ Math.hypot(spanX, spanY) æ–¹æ³•ï¼Œç›¸å½“äº sqrt(x<em>x + y</em>y)</li>
</ul>
<pre><code class="java">        final float spanX = devX * 2;
        final float spanY = devY * 2;
        final float span;
        if (inAnchoredScaleMode()) {
            span = spanY;
        } else {
            span = (float) Math.hypot(spanX, spanY);
        }</code></pre>
<hr>
<h2 id="ç»“æŸç¼©æ”¾äº‹ä»¶"><a href="#ç»“æŸç¼©æ”¾äº‹ä»¶" class="headerlink" title="ç»“æŸç¼©æ”¾äº‹ä»¶"></a>ç»“æŸç¼©æ”¾äº‹ä»¶</h2><ul>
<li>@Google Translateï¼šæ ¹æ®éœ€è¦è°ƒåº¦å¼€å§‹/ç»“æŸäº‹ä»¶ã€‚</li>
<li>å¦‚æœé…ç½®å‘ç”Ÿæ›´æ”¹ï¼Œè¯·é€šè¿‡å¼€å§‹é€šçŸ¥åº”ç”¨é‡ç½®å…¶å½“å‰çŠ¶æ€</li>
<li>ä¸€ä¸ªæ–°çš„æ¯”ä¾‹äº‹ä»¶æµã€‚</li>
<li>è¿™é‡Œå°±ä¸åšå¤ªå¤šæè¿°ï¼Œä¸»è¦å°±æ˜¯ï¼š</li>
<li>åˆ¤æ–­æ˜¯ä¸æ˜¯æ‰€æœ‰æ‰‹æŒ‡éƒ½ç¦»å¼€äº†å±å¹•</li>
<li>å¦‚æœæ˜¯ï¼Œé‚£ä¹ˆç´¢å‘½è¿™ä¸ªç¼©æ”¾è¿›ç¨‹ç»“æŸäº†</li>
<li>åˆ™ä¿å­˜å½“å‰ç¼©æ”¾çš„æ•°æ®</li>
<li>è°ƒç”¨ onScaleEnd æ–¹æ³•ï¼Œç»“æŸå½“å‰æ“ä½œ</li>
</ul>
<pre><code class="java">        final boolean wasInProgress = mInProgress;
        mFocusX = focusX;
        mFocusY = focusY;
        if (!inAnchoredScaleMode() &amp;&amp; mInProgress &amp;&amp; (span &lt; mMinSpan || configChanged)) {
            mListener.onScaleEnd(this);
            mInProgress = false;
            mInitialSpan = span;
        }
        if (configChanged) {
            mPrevSpanX = mCurrSpanX = spanX;
            mPrevSpanY = mCurrSpanY = spanY;
            mInitialSpan = mPrevSpan = mCurrSpan = span;
        }</code></pre>
<h2 id="è§¦å‘-onScaleBegin-å¼€å§‹ç¼©æ”¾"><a href="#è§¦å‘-onScaleBegin-å¼€å§‹ç¼©æ”¾" class="headerlink" title="è§¦å‘ onScaleBegin å¼€å§‹ç¼©æ”¾"></a>è§¦å‘ onScaleBegin å¼€å§‹ç¼©æ”¾</h2><ul>
<li>å½“æ‰‹æŒ‡ç§»åŠ¨çš„è·ç¦»è¶…è¿‡ä¸€å®šæ•°å€¼(æ•°å€¼å¤§å°ç”±ç³»ç»Ÿå®šä¹‰)åï¼Œä¼šè§¦å‘ onScaleBegin æ–¹æ³•</li>
<li>å¦‚æœç”¨æˆ·åœ¨ onScaleBegin æ–¹æ³•é‡Œé¢è¿”å›äº† trueï¼Œåˆ™æ¥å—äº‹ä»¶åï¼Œå°±ä¼šé‡ç½®ç¼©æ”¾ç›¸å…³æ•°å€¼ï¼Œå¹¶ä¸”å¼€å§‹ç§¯ç´¯ç¼©æ”¾å› å­ã€‚</li>
</ul>
<pre><code class="java">        final int minSpan = inAnchoredScaleMode() ? mSpanSlop : mMinSpan;
        if (!mInProgress &amp;&amp; span &gt;= minSpan &amp;&amp;
                (wasInProgress || Math.abs(span - mInitialSpan) &gt; mSpanSlop)) {
            mPrevSpanX = mCurrSpanX = spanX;
            mPrevSpanY = mCurrSpanY = spanY;
            mPrevSpan = mCurrSpan = span;
            mPrevTime = mCurrTime;
            mInProgress = mListener.onScaleBegin(this);
        }</code></pre>
<h2 id="é€šçŸ¥ç”¨æˆ·è¿›è¡Œç¼©æ”¾å¤„ç†"><a href="#é€šçŸ¥ç”¨æˆ·è¿›è¡Œç¼©æ”¾å¤„ç†" class="headerlink" title="é€šçŸ¥ç”¨æˆ·è¿›è¡Œç¼©æ”¾å¤„ç†"></a>é€šçŸ¥ç”¨æˆ·è¿›è¡Œç¼©æ”¾å¤„ç†</h2><ul>
<li>@ Google Translate: å¤„ç†åŠ¨ä½œ;ç„¦ç‚¹å’Œè·¨åº¦/æ¯”ä¾‹å› å­æ­£åœ¨å‘ç”Ÿå˜åŒ–ã€‚</li>
<li>è¿™å—ä»£ç çš„åŠŸèƒ½ä¸»è¦å°±æ˜¯é€šçŸ¥ç”¨æˆ·ï¼ˆç¼–ç¨‹è€…ï¼‰</li>
<li>æ ¹æ®è¿™äº›æ•°æ®è¿›è¡Œç¼©æ”¾</li>
</ul>
<pre><code class="java">        if (action == MotionEvent.ACTION_MOVE) {
            mCurrSpanX = spanX;
            mCurrSpanY = spanY;
            mCurrSpan = span;

            boolean updatePrev = true;

            if (mInProgress) {
                updatePrev = mListener.onScale(this);
            }

            if (updatePrev) {
                mPrevSpanX = mCurrSpanX;
                mPrevSpanY = mCurrSpanY;
                mPrevSpan = mCurrSpan;
                mPrevTime = mCurrTime;
            }
        }</code></pre>
<h3 id="updatePrev"><a href="#updatePrev" class="headerlink" title="updatePrev"></a>updatePrev</h3><ul>
<li>è¿™ä¸ªç”¨äºæ¥æ”¶ç”¨æˆ·çš„è¿”å›å€¼</li>
<li>åªè¦æˆ‘ä»¬æ”¾å› true ï¼Œç³»ç»Ÿå°±ä¼šä¿å­˜å½“å‰æ•°æ®</li>
<li>é‡æ–°è·å–å¹¶è®¡ç®—æ–°çš„æ•°æ®å’Œæ¯”ä¾‹</li>
<li>ç³»ç»Ÿé»˜è®¤è¿”å› false ç„¶åè¿›è¡Œä¸‹ä¸€æ¬¡äº‹ä»¶çš„è®¡ç®—</li>
</ul>
<pre><code class="java">            if (mInProgress) {
                updatePrev = mListener.onScale(this);
            }

            if (updatePrev) {
                mPrevSpanX = mCurrSpanX;
                mPrevSpanY = mCurrSpanY;
                mPrevSpan = mCurrSpan;
                mPrevTime = mCurrTime;
            }</code></pre>
<hr>
<h1 id="ç»“è¯­"><a href="#ç»“è¯­" class="headerlink" title="ç»“è¯­"></a>ç»“è¯­</h1><p>æˆ‘è¦è®²çš„æ‰€æœ‰å†…å®¹ï¼Œåˆ°è¿™é‡Œå°±å®Œå…¨ç»“æŸäº†</p>
<p>ç”±äºæºç æ˜¯æŒ‰ç…§æˆ‘è‡ªå·±çš„ç†è§£æ¥è®²çš„ï¼Œæ‰€ä»¥éš¾å…ä¼šæœ‰ä¸€äº›å‡ºå…¥</p>
<p>å¸Œæœ›å¤§å®¶èƒ½åœ¨è¯„è®ºåŒºä¸­å¸®æˆ‘æŒ‡å‡ºï¼Œè°¢è°¢ï½ ğŸ™</p>

            <hr>
          </div>
          <br>
          <div>
            
              <p>
                <i class="iconfont icon-inbox"></i>
                
                  <a class="hover-with-bg" href="/categories/android">android</a>
                  &nbsp;
                
              </p>
            
            <p>
              <i class="iconfont icon-tag"></i>
              
                <a class="hover-with-bg" href="/tags/android">android</a>
              
                <a class="hover-with-bg" href="/tags/ScaleGestureDetector">ScaleGestureDetector</a>
              
                <a class="hover-with-bg" href="/tags/%E7%BC%A9%E6%94%BE%E6%89%8B%E5%8A%BF">ç¼©æ”¾æ‰‹åŠ¿</a>
              
            </p>
            
              <p class="note note-warning">æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a href="https://zh.wikipedia.org/wiki/Wikipedia:CC_BY-SA_3.0%E5%8D%8F%E8%AE%AE%E6%96%87%E6%9C%AC" rel="nofollow noopener">CC BY-SA 3.0åè®®</a> ã€‚è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼</p>
            
          </div>
        </div>
      </div>
    </div>
    <div class="d-none d-lg-block col-lg-2 toc-container">
      
  <div id="toc">
    <p class="h4"><i class="far fa-list-alt"></i>&nbsp;ç›®å½•</p>
    <div id="tocbot"></div>
  </div>

    </div>
  </div>
</div>

<!-- custom -->


<!-- Comments -->
<div class="col-lg-7 mx-auto nopadding-md">
  <div class="container comments mx-auto" id="comments">
    
      <br><br>
      
      
  <div id="gitalk-container"></div>
  <link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">
  <script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/blueimp-md5@2.11.1/js/md5.min.js"></script>
  <script type="text/javascript">
    var gitalk = new Gitalk({
      clientID: 'b490011b0888d5755e07',
      clientSecret: '032d235d0a00fedfc15850e426ad915f2e9a7278',
      repo: 'FishInWater-1999.github.io',
      owner: 'FishInWater-1999',
      admin: 'FishInWater-1999',
      id: md5(location.pathname),
      language: 'zh-CN',
      perPage: '15',
      pagerDirection: 'last',
      createIssueManually: 'true',
      distractionFreeMode: 'false'
    });

    gitalk.render('gitalk-container')
  </script>

    
  </div>
</div>
    
  </main>

  
    <a class="z-depth-1" id="scroll-top-button" href="#" role="button">
      <i class="fa fa-chevron-up scroll-top-arrow" aria-hidden="true"></i>
    </a>
  

  
    <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">æœç´¢</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v"
                 for="local-search-input">å…³é”®è¯</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>
  

  <footer class="mt-5">
  <div class="text-center py-3">
    <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><b>Hexo</b></a>
    <i class="iconfont icon-love"></i>
    <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"> <b>Fluid</b></a>
    <br>
    
  </div>
</footer>

<!-- SCRIPTS -->
<script src="/lib/jquery/jquery.min.js" ></script>
<script src="/lib/popper/popper.min.js" ></script>
<script src="/lib/bootstrap/js/bootstrap.min.js" ></script>
<script src="/lib/mdbootstrap/js/mdb.min.js" ></script>
<script src="/js/main.js" ></script>

  <script src="/js/lazyload.js" ></script>


  
    <script src="/lib/tocbot/tocbot.min.js" ></script>
  
  <script src="/js/post.js" ></script>


  <script src="/lib/prettify/prettify.min.js" ></script>
  <script>
    $(document).ready(function () {
      $('pre').addClass('prettyprint linenums');
      prettyPrint();
    })
  </script>


  <script src="/lib/typed/typed.min.js" ></script>
  <script>
    var typed = new Typed('#subtitle', {
      strings: [
        '  ',
        "ç¼©æ”¾æ‰‹åŠ¿ ScaleGestureDetector  æºç è§£æï¼Œè¿™ä¸€ç¯‡å°±å¤Ÿäº†&nbsp;",
      ],
      cursorChar: "_",
      typeSpeed: 70,
      loop: false,
    });
    typed.stop();
    $(document).ready(function () {
      $(".typed-cursor").addClass("h2");
      typed.start();
    });
  </script>


  <script src="/lib/anchor/anchor.min.js" ></script>
  <script>
    anchors.options = {
      placement: "right",
      visible: "false",
      
    };
    var el = "h1,h2,h3,h4,h5,h6".split(",");
    var res = [];
    for (item of el) {
      res.push(".markdown-body > " + item)
    }
    anchors.add(res.join(", "))
  </script>



  <script src="/js/local-search.js" ></script>
  <script>
    var path = "/local-search.xml";
    var inputArea = document.querySelector("#local-search-input");
    inputArea.onclick = function () {
      getSearchFile(path);
      this.onclick = null
    }
  </script>


</body>
</html>
